# These are Centos  Packages and Centos specific tasks

  - name: Check for firewalld
    stat:
      path: /etc/systemd/system/multi-user.target.wants/firewalld.service
    register: firewalld_service

  - name: Disable firewalld
    service:
      name: firewalld
      enabled: no
    when: firewalld_service.stat.exists

  - name: Run Yum update
    yum:
      name: "*"
      state: latest

  - name: Install open vm tools if this is a virtual machine
    when: ansible_virtualization_role == "guest"
    yum:
      name: open-vm-tools
      state: latest

  - name: Install common packages
    yum:
      name: "{{ packages }}"
    vars:
      packages:
      - bind-utils
      - cifs-utils
      - curl
      - epel-release
      - net-tools
      - nfs-utils
      - rsync
      - samba-client
      - wget

